{"version":3,"file":"vue.js","sources":["../src/util.js","../src/global-api/index.js","../src/complier/generate.js","../src/complier/parse.js","../src/complier/index.js","../src/observer/dep.js","../src/observer/schedular.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["let callbacks = [];\r\nlet waiting = false;\r\n\r\nfunction flushCallbacks() {\r\n    for(let i = 0; i <callbacks.length;i++){\r\n        let callback = callbacks[i];\r\n        callback();\r\n    }\r\n    waiting = false;\r\n    callbacks = [];\r\n}\r\n\r\nexport function nextTick(cb) {\r\n    callbacks.push(cb);\r\n    if(!waiting) {\r\n        waiting = true;\r\n         // 1.promise先看支持不支持 \r\n        // 2.mutationObserver\r\n        // 3.setImmdiate\r\n        // 4.setTimeout  Vue3 next-tick就直接用了promise\r\n        return Promise.resolve().then(flushCallbacks)\r\n    }\r\n}\r\n\r\n//vue 的生命周期函数\r\nlet strats = {}\r\nlet LIFECYCLE_HOOKS = [\r\n    'beforeCreate',\r\n    'created',\r\n    'beforeMount',\r\n    'mounted',\r\n    //....\r\n]\r\nfunction mergeHook(parentVal, childVal) {\r\n    if(childVal) {\r\n        if(parentVal) {\r\n            return parentVal.concat(childVal)\r\n        }else {\r\n            return [childVal]\r\n        }\r\n    }else {\r\n        return parentVal\r\n    }\r\n    \r\n}\r\nLIFECYCLE_HOOKS.forEach(hook=>{\r\n    strats[hook] = mergeHook;\r\n})\r\n\r\nstrats.components = function(parentVal, childVal) {\r\n    const res = Object.create(parentVal);\r\n    if (childVal) {\r\n        for (let key in childVal) {\r\n            res[key] = childVal[key];\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nexport function isObject(val) {\r\n    return typeof val === 'object' &&  val !== null;\r\n}\r\n\r\n\r\nexport function mergeOptions(parent, child) {\r\n    let options = {};\r\n    for(let key in parent) {\r\n        mergeField(key);\r\n    }\r\n\r\n    for(let key in child) {\r\n        if(parent.hasOwnProperty(key)) continue;\r\n        mergeField(key);\r\n    }\r\n\r\n    function mergeField(key) {\r\n        if(strats[key]) {\r\n            return options[key] = strats[key](parent[key], child[key]);\r\n        }\r\n        if(isObject(parent[key])) {\r\n            options[key] = {...parent[key], ...child[key]}\r\n        }else{\r\n            if(child[key]) {\r\n                options[key] = child[key]\r\n            }else {\r\n                options[key] = parent[key]\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    return options;\r\n}\r\n\r\nfunction makeUp(str) {\r\n    let map = {}\r\n    str.split(\",\").forEach(item=>{\r\n        map[item] = true\r\n    })\r\n    return (tag) => map[tag] || false\r\n}\r\n\r\nexport const isReservedTag = makeUp('div,ul,li,p,h1,h2,h3,h4,h5,h6,table,input,button,em,i,span,a');","\r\nimport {mergeOptions}  from \"../util\"\r\n\r\nexport function initGlobalAPI(Vue) {\r\n\r\n    Vue.options = {}\r\n\r\n    Vue.mixin = function(mixin) {\r\n        this.options =  mergeOptions(this.options, mixin);\r\n        return this;\r\n    }\r\n\r\n    Vue.options._base = Vue;\r\n    Vue.options.components = {}\r\n\r\n    Vue.component = function(id, definition) {\r\n        definition.name = definition.name || id;\r\n        definition = this.options._base.extend(definition);\r\n        Vue.options.components[id] = definition;\r\n    }\r\n    let cid = 0\r\n    Vue.extend = function(options) {\r\n        const Super = this;\r\n        const Sub = function VueComponent(options) {\r\n            this._init(options);\r\n        }\r\n        Sub.cid = cid++;\r\n        Sub.prototype = Object.create(Super.prototype);\r\n        Sub.prototype.constructor = Sub;\r\n        Sub.component = Super.component;\r\n        Sub.options = mergeOptions(Super.options, options)\r\n        return Sub;\r\n    }\r\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\nfunction genProps(attrs) {\r\n    let str = '';\r\n    for(let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i];\r\n        if(attr.name==\"style\") {\r\n            let obj = {};\r\n            attr.value.split(';').forEach(item => {\r\n                if(item) {\r\n                    let [key, value] = item.split(':');\r\n                    obj[key] = value\r\n                }\r\n            });\r\n            attr.value = obj\r\n        }\r\n\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n    return `{${str.slice(0,-1)}}`\r\n}\r\nfunction gen(node) {\r\n    if(node.type == 1) {\r\n        return generate(node)\r\n    }else {\r\n        let text = node.text;\r\n        if(defaultTagRE.test(text)) {\r\n            let tokens = [];\r\n            let match ;\r\n            let index = 0;\r\n            let lastIndex = defaultTagRE.lastIndex = 0;\r\n            while(match = defaultTagRE.exec(text)){ // aa {{ age }} haha \r\n                index = match.index;\r\n                if(index >lastIndex){\r\n                    tokens.push(JSON.stringify(text.slice(lastIndex,index)));\r\n                }\r\n                tokens.push(`_s(${match[1].trim()})`);\r\n                lastIndex = index + match[0].length;\r\n            }\r\n            if(lastIndex < text.length){\r\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n            }\r\n            return  `_v(${tokens.join('+')})`\r\n        }else {\r\n            return `_v(${JSON.stringify(text)})`\r\n        }\r\n    }\r\n}\r\n\r\nfunction genChildren(el) {\r\n    const children  = el.children;\r\n    if(children){\r\n        return children.map(child=>gen(child)).join(',')\r\n    }\r\n}\r\nexport function generate(el) {\r\n    let children = genChildren(el);\r\n    let code = `_c('${el.tag}',${el.attrs.length!=0?genProps(el.attrs):'undefined'}${children?','+children:''})`;\r\n    return code;   \r\n}\r\n\r\n/**\r\n * 将字符串 转成可运行的js\r\n * <div id=\"app\" a=1 b =\"2\">\r\n *    hello \r\n *    <div style=\"color: red\">\r\n *         <span>! {{ name}} !</span>\r\n *    </div>\r\n * </div>\r\n * _c('div',{id:'app',a:1,b:'2'},\r\n *      _v(\"hello\"),\r\n *      _c('div', {style:{color: 'red}}, \r\n *          _c('span',undefined, \r\n *              _v('!' + _s(name) + '!')\r\n *          )\r\n *      )\r\n * )\r\n */","\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // aa-aa \r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //aa:aa\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 可以匹配到标签名  [1]\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); //[0] 标签的结束名字\r\n//    style=\"xxx\"   style='xxx'  style=xxx\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n\r\n\r\nexport function parseHTML(html) {\r\n    let root;\r\n    let currentParent;\r\n    let stack = []\r\n\r\n\r\n    function createASTElement(tag, attrs) {\r\n        return {\r\n            tag,\r\n            attrs,\r\n            type: 1,\r\n            children: [],\r\n            parent: null\r\n        }\r\n\r\n    }\r\n\r\n\r\n    function start(tagName, attrs) {\r\n        let node = createASTElement(tagName, attrs);\r\n        if(root == null) {\r\n            root = node;\r\n        }\r\n        currentParent = node;\r\n        stack.push(node);\r\n    }\r\n\r\n    function end(tagName) {\r\n        let node = stack.pop();\r\n        if(node.tag != tagName) {\r\n            throw Error(\"解析报错\");\r\n        }\r\n\r\n        currentParent = stack[stack.length - 1];\r\n        if(currentParent) {\r\n            node.parent = currentParent;\r\n            currentParent.children.push(node);\r\n        }\r\n    }\r\n\r\n    function chars(text) {\r\n        text = text.replace(/\\s/g,\"\");\r\n        if(text) {\r\n            currentParent.children.push({\r\n                text,\r\n                type: 3\r\n            })\r\n        }\r\n    }\r\n\r\n    function advance(n) {\r\n        html = html.substring(n)\r\n    }\r\n\r\n    function parseStartTag() {\r\n        let start = html.match(startTagOpen);\r\n        if(start) {\r\n            let match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length);\r\n\r\n            let end, attr;\r\n            while(!(end=html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n                match.attrs.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5] || true\r\n                })\r\n                advance(attr[0].length)\r\n            }\r\n            if(end) {\r\n                advance(end[0].length)\r\n                return match\r\n            }\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    while(html) {\r\n        let textEnd = html.indexOf(\"<\");\r\n        if(textEnd == 0) {//标签\r\n            let startTagMatch = parseStartTag();\r\n            if(startTagMatch) {\r\n                start(startTagMatch.tagName, startTagMatch.attrs)\r\n                continue\r\n            }\r\n\r\n            let endTagMatch = html.match(endTag);\r\n            if(endTagMatch) {\r\n                advance(endTagMatch[0].length);\r\n                end(endTagMatch[1]);\r\n                continue;\r\n            }\r\n\r\n\r\n        }\r\n        if(textEnd > 0) {//文本\r\n            let text = html.substring(0, textEnd);\r\n            advance(text.length);\r\n            chars(text);\r\n        }\r\n    }\r\n    return root;\r\n}","import { generate } from \"./generate.js\";\r\nimport { parseHTML } from \"./parse.js\";\r\nexport function compileToFunctions(template) {\r\n    //获取ast树\r\n    let ast = parseHTML(template);\r\n    \r\n    //获得可运行的render函数\r\n    let code = generate(ast);\r\n    let render = `with(this){return ${code}}`\r\n    let fn = new Function(render);\r\n    return fn\r\n}\r\n\r\n// function a(){\r\n//     with(this) {\r\n//         console.log(b)\r\n//     }\r\n// }\r\n// a.call({b:1}) // 1","\r\nlet id = 0;\r\n\r\nclass Dep{\r\n    constructor() {\r\n        this.id = id++;\r\n        this.subs = []\r\n    }\r\n\r\n    depend() {\r\n        Dep.target.addDep(this); //让每个watcher 记住dep\r\n    }\r\n\r\n    addSub(watcher) {\r\n        this.subs.push(watcher)\r\n    }\r\n\r\n    notify() {\r\n        this.subs.forEach(watcher=>{\r\n            watcher.update()\r\n        })\r\n    }\r\n}\r\n\r\nDep.target = null;\r\n\r\nexport function pushTarget(watcher) {\r\n    Dep.target = watcher\r\n}\r\n\r\nexport function popTarget() {\r\n    Dep.target = null;\r\n}\r\n\r\n\r\nexport default Dep;","import { nextTick } from \"../util\";\r\n\r\nlet has = {};\r\nlet queue = [];\r\nlet pending = false\r\nfunction flushSchedularQueue() {\r\n    for(let i = 0; i < queue.length; i++) {\r\n        let watcher = queue[i];\r\n        watcher.run();\r\n    }\r\n    has = {};\r\n    queue = [];\r\n    pending = false;\r\n}\r\nexport function queueWatcher(watcher){\r\n    let id = watcher.id;\r\n    if(!has[id]) {\r\n        has[id] = true;\r\n        queue.push(watcher);\r\n        if(!pending) {\r\n            pending = true;\r\n            nextTick(flushSchedularQueue)\r\n        }\r\n    }\r\n\r\n}","import Dep, { popTarget, pushTarget } from \"./dep\";\r\nimport { queueWatcher } from \"./schedular\";\r\n\r\nlet id = 0;\r\nclass Watcher{\r\n    constructor(vm, exprOrFn, cb, options) {\r\n        this.vm = vm;\r\n        this.cb = cb;\r\n        this.options = options;\r\n        this.id = id++;\r\n        this.getter = exprOrFn;\r\n        this.deps = [];\r\n        this.depsId = new Set();\r\n        this.get(); // 调用传入的函数， 调用了render方法， 此时会对模板中的数据进行取值\r\n    }\r\n\r\n    get() {\r\n        //当页面渲染时，注册一个watcher\r\n        pushTarget(this);\r\n        this.getter();\r\n        popTarget();\r\n    }\r\n\r\n    addDep(dep) {\r\n        let id = dep.id;\r\n        if(!this.depsId.has(id)) {\r\n            this.deps.push(dep);\r\n            this.depsId.add(id);\r\n            dep.addSub(this);\r\n        }\r\n    }\r\n\r\n    run() {\r\n        this.get()\r\n    }\r\n    update() {\r\n        queueWatcher(this);\r\n    }\r\n}\r\n\r\nexport default Watcher;","export function patch(oldVnode, vnode) {\r\n    // oldVnode 是一个真实的元素\r\n    if(!oldVnode){\r\n        return createElm(vnode); // 根据虚拟节点创建元素\r\n    }\r\n\r\n\r\n    const isRealElement = oldVnode.nodeType\r\n    if (isRealElement) {\r\n        // 初次渲染\r\n        const oldElm = oldVnode; // id=\"app\"\r\n        const parentElm = oldElm.parentNode; // body\r\n        let el = createElm(vnode);\r\n        parentElm.insertBefore(el, oldElm.nextSibling); // 将创建的节点查到原有的节点的下一个\r\n        parentElm.removeChild(oldElm);\r\n        return el; // vm.$el\r\n    } else {\r\n        // diff算法\r\n    }\r\n}\r\n\r\nexport function createComponent(vnode) {\r\n    let i = vnode.data;\r\n    if((i = i.hook) && (i = i.init)){\r\n        i(vnode)\r\n    }\r\n    if(vnode.componentInstance){ // 如果虚拟节点上有组件的实例说明当前这个vode是组件\r\n        return true;\r\n    }\r\n    return false\r\n}\r\n\r\nfunction createElm(vnode) { // 根据虚拟节点创建真实的节点\r\n    let { tag, children, key, data, text, vm } = vnode;\r\n    if(typeof tag === 'string'){\r\n        // 可能是组件\r\n        if(createComponent(vnode)){\r\n            // 如果返回true 说明这个虚拟节点是组件\r\n            // 如果是组件，就将组件渲染后的真实元素给我\r\n            return vnode.componentInstance.$el\r\n        }\r\n        vnode.el =  document.createElement(tag); // 用vue的指令时 可以通过vnode拿到真实dom\r\n        updateProperties(vnode);\r\n        children.forEach(child=>{ // 如果有儿子节点，就进行递归操作\r\n           vnode.el.appendChild(createElm(child))\r\n        })\r\n    }else{\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n\r\n    return vnode.el;\r\n}\r\nfunction updateProperties(vnode){\r\n    let newProps = vnode.data || {}; // 属性\r\n    let el = vnode.el; // dom元素\r\n\r\n    for(let key in newProps){\r\n        if(key == 'style'){\r\n            for(let styleName in newProps.style){\r\n                el.style[styleName] = newProps.style[styleName]\r\n            }\r\n        }else if(key === 'class'){\r\n            el.className = newProps.class\r\n        }else{\r\n            el.setAttribute(key,newProps[key]);\r\n        }\r\n    }\r\n}","import Watcher from \"./observer/watcher\"\r\nimport {patch} from './vdom/patch'\r\n\r\nexport function lifecycleMixin(Vue) {\r\n    Vue.prototype._update = function(vnode) {\r\n        const vm = this;\r\n        vm.$el = patch(vm.$el, vnode);\r\n    }\r\n}\r\n\r\nexport function callHook(vm, hook) {\r\n    let handlers = vm.$options[hook];\r\n    if(handlers) {\r\n        handlers.forEach(handler=>{\r\n            handler.call(vm)\r\n        })\r\n    }\r\n    \r\n}\r\n\r\n//组件挂载\r\nexport function mountComponent(vm) {\r\n     // 默认vue是通过watcher来进行渲染  = 渲染watcher （每一个组件都有一个渲染watcher）\r\n    let updateComponent = () => {\r\n        let vnode = vm._render();//生成虚拟节点\r\n        \r\n        vm._update(vnode);//将虚拟节点转为真实节点\r\n    }\r\n\r\n    new Watcher(vm, updateComponent, () => {}, true); // updateComponent();\r\n\r\n}","let oldArrayMethods = Array.prototype;\r\n\r\nexport let arrayMethods = Object.create(Array.prototype);\r\n\r\nlet methods = [\r\n    'push',\r\n    'pop',\r\n    'unshift',\r\n    'shift',\r\n    'splice',\r\n    'reserve',\r\n    'sort'\r\n]\r\n\r\nmethods.forEach(method=> {\r\n    arrayMethods[method] = function(...args) {\r\n        let res = oldArrayMethods[method].call(this, ...args);\r\n        \r\n        let ob = this.__ob__;\r\n        let inserted;\r\n        switch (method) {\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args;    \r\n                break;\r\n            case 'splice':\r\n                inserted = args.slice(2)\r\n        }\r\n        // console.log(`调用了数组${method}方法`);\r\n        if(inserted) ob.observeArray(inserted);\r\n        ob.dep.notify();\r\n        return res;\r\n    }\r\n})\r\n","import { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\nclass Observer{\r\n    constructor(value) {\r\n        Object.defineProperty(value, \"__ob__\", {\r\n            configurable: false,\r\n            enumerable: false,\r\n            value: this,\r\n        })\r\n        this.dep = new Dep(); // 给数组本身和对象本身增加一个dep属性\r\n        if(Array.isArray(value)) {\r\n            //监听删除、添加、排序、反转元素的方法\r\n            Object.setPrototypeOf(value, arrayMethods)\r\n            this.observeArray(value);\r\n        }else{\r\n            this.walk(value);\r\n        }\r\n        \r\n    }\r\n\r\n    observeArray(value) {\r\n        for(let i = 0, len = value.length; i < len; i++) {\r\n            observe(value[i]);\r\n        }\r\n    }\r\n\r\n    walk(data) {\r\n        Object.keys(data).forEach(key=>{\r\n            defineReactive(data, key, data[key])\r\n        })\r\n    }\r\n}\r\nfunction dependArray(value){ // 就是让里层数组收集外层数组的依赖，这样修改里层数组也可以更新视图 \r\n    for(let i = 0 ; i < value.length;i++){\r\n        let current = value[i];\r\n        current.__ob__ && current.__ob__.dep.depend(); // 让里层的和外层收集的都是同一个watcher\r\n        if(Array.isArray(current)){\r\n            dependArray(current);\r\n        }\r\n    }\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n    let childOb = observe(value);\r\n    let dep = new Dep(); // 每次都会给属性创建一个dep\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            if(Dep.target){\r\n                dep.depend();// 让这个属性自己的dep记住这个watcher，也要让watcher记住这个dep\r\n                if(childOb){ // 如果对数组取值 会将当前的watcher和数组进行关联\r\n                    childOb.dep.depend();\r\n                    if(Array.isArray(value)){\r\n                        dependArray(value);\r\n                    }\r\n                }\r\n                \r\n            }\r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if(newValue === value) return;\r\n            value = newValue;\r\n            observe(newValue);\r\n            dep.notify();// 通知dep中记录的watcher让它去执行\r\n        }\r\n    })\r\n}\r\nexport function observe(data) {\r\n\r\n    if(typeof data !== 'object' || data === null) {\r\n        return\r\n    }\r\n    if(data.__ob__){ // 放置循环引用了\r\n        return;\r\n    }\r\n    return new Observer(data)\r\n}","import { observe } from \"./observer/index\";\r\n\r\nexport function initState(vm) {\r\n    const opts = vm.$options;\r\n    if(opts.data) {\r\n        initData(vm)\r\n    }\r\n}\r\n\r\nfunction proxy(target, source, key) {\r\n    Object.defineProperty(target, key, {\r\n        get() {\r\n            return target[source][key]\r\n        },\r\n        set(newValue) {\r\n            target[source][key] = newValue;\r\n        }\r\n    })\r\n}\r\n\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data;\r\n    data = vm._data = typeof data === 'function' ? data() : data;\r\n\r\n    for(let key in data) {\r\n        //将data上的数据挂载到vm上\r\n        proxy(vm, '_data', key);\r\n    }\r\n    observe(data);\r\n}\r\n\r\n","import { compileToFunctions } from \"./complier/index\";\r\nimport { callHook, mountComponent } from \"./lifecycle\";\r\nimport { initState } from \"./state\";\r\nimport { mergeOptions, nextTick } from \"./util\";\r\n\r\n\r\nexport function initMixin(Vue){\r\n    Vue.prototype._init = function(options) {\r\n        let vm = this;\r\n        vm.$options = mergeOptions(vm.constructor.options, options);\r\n        console.log(vm.$options)\r\n        //初始化状态\r\n        callHook(vm,'beforeCreate');\r\n        initState(vm);\r\n        callHook(vm,'created');\r\n        if(vm.$options.el) {//获取要渲染的模板\r\n            this.$mounted(vm.$options.el)\r\n        }\r\n    }\r\n    Vue.prototype.$nextTick = nextTick\r\n    Vue.prototype.$mounted = function(el) {\r\n        el = document.querySelector(el);\r\n        const vm = this;\r\n        const options = vm.$options;\r\n        vm.$el = el;\r\n        // 获取render\r\n        if(!options.render) {\r\n            let template = options.template;\r\n            if(!template && el) {\r\n                template = el.outerHTML;\r\n            }\r\n            const render = compileToFunctions(template);\r\n            options.render = render\r\n        }\r\n\r\n        mountComponent(vm);\r\n        \r\n    }\r\n}\r\n\r\n","import { isObject, isReservedTag } from \"../util\"\r\n\r\n//创建虚拟节点\r\nexport function createElement(vm, tag, data={}, ...children){\r\n    if(isReservedTag(tag)){\r\n        return vnode(vm,tag,data, data.key,children, undefined)\r\n    }else {\r\n        const Ctor = vm.$options.components[tag];\r\n        return createComponent(vm,tag,data, data.key,children, undefined, Ctor)\r\n    }\r\n    \r\n}\r\nfunction createComponent(vm,tag,data, key,children, text, Ctor) {\r\n    if(isObject(Ctor)) {\r\n        Ctor = vm.$options._base.extend(Ctor);\r\n    }\r\n    data.hook = {\r\n        init(vnode) {\r\n            // 调用子组件的构造函数\r\n            let child = vnode.componentInstance = new vnode.componentOptions.Ctor({});\r\n            child.$mounted(); // 手动挂在  vnode.componentInstance.$el = 真实的元素\r\n        }\r\n    }\r\n\r\n    return vnode(vm,`vue-compontent-${Ctor.cid}-${tag}`,data, key,undefined, undefined, {Ctor})\r\n\r\n\r\n}\r\nexport function createTextVnode(vm, text) {\r\n    return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\n\r\nfunction vnode(vm, tag, data, key,children, text, componentOptions) {\r\n    return {\r\n        vm, \r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text,\r\n        componentOptions\r\n    }\r\n}","import { createElement, createTextVnode } from \"./vdom/index\"\r\n\r\nexport function renderMixin(Vue) {\r\n    Vue.prototype._c = function(...args) {\r\n        return createElement(this, ...args);\r\n    }\r\n    Vue.prototype._v = function(text) {\r\n        return createTextVnode(this, text);\r\n    }\r\n    Vue.prototype._s = function(val) {\r\n        return val == null ? \"\" : typeof val === 'object' ? JSON.stringify(val) : val\r\n    }\r\n    Vue.prototype._render = function() {\r\n        let vm = this;\r\n        let render = vm.$options.render;\r\n        let vnode = render.call(vm);\r\n        return vnode\r\n    }\r\n}","import { initGlobalAPI } from \"./global-api/index\";\r\nimport { initMixin } from \"./init\";\r\nimport { lifecycleMixin } from \"./lifecycle\";\r\nimport { renderMixin } from \"./render\";\r\n\r\n\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\n\r\ninitMixin(Vue);\r\nlifecycleMixin(Vue);\r\nrenderMixin(Vue);\r\n\r\ninitGlobalAPI(Vue);\r\n\r\nexport default Vue;"],"names":["callbacks","waiting","flushCallbacks","i","length","callback","nextTick","cb","push","Promise","resolve","then","strats","LIFECYCLE_HOOKS","mergeHook","parentVal","childVal","concat","forEach","hook","components","res","Object","create","key","isObject","val","mergeOptions","parent","child","options","mergeField","hasOwnProperty","makeUp","str","map","split","item","tag","isReservedTag","initGlobalAPI","Vue","mixin","_base","component","id","definition","name","extend","cid","Super","Sub","VueComponent","_init","prototype","constructor","defaultTagRE","genProps","attrs","attr","obj","value","JSON","stringify","slice","gen","node","type","generate","text","test","tokens","match","index","lastIndex","exec","trim","join","genChildren","el","children","code","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","root","currentParent","stack","createASTElement","start","tagName","end","pop","Error","chars","replace","advance","n","substring","parseStartTag","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunctions","template","ast","render","fn","Function","Dep","subs","depend","target","addDep","addSub","watcher","notify","update","pushTarget","popTarget","has","queue","pending","flushSchedularQueue","run","queueWatcher","Watcher","vm","exprOrFn","getter","deps","depsId","Set","get","dep","add","patch","oldVnode","vnode","createElm","isRealElement","nodeType","oldElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","createComponent","data","init","componentInstance","$el","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","class","setAttribute","lifecycleMixin","_update","callHook","handlers","$options","handler","call","mountComponent","updateComponent","_render","oldArrayMethods","Array","arrayMethods","methods","method","args","ob","__ob__","inserted","observeArray","Observer","defineProperty","configurable","enumerable","isArray","setPrototypeOf","walk","len","observe","keys","defineReactive","dependArray","current","childOb","set","newValue","initState","opts","initData","proxy","source","_data","initMixin","console","log","$mounted","$nextTick","querySelector","outerHTML","undefined","Ctor","componentOptions","createTextVnode","renderMixin","_c","_v","_s"],"mappings":"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"}