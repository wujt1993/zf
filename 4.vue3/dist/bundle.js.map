{"version":3,"file":"bundle.js","sources":["../src/reactivity/effect.ts","../src/reactivity/baseHandlers.ts","../src/shared/index.ts","../src/reactivity/reactive.ts"],"sourcesContent":["export const effect = (fn, options) =>{\r\n    const effect = createReactiveEffect(fn);\r\n    effect()\r\n}\r\n\r\nexport const effectStack = [];\r\nfunction createReactiveEffect(fn) {\r\n    const effect = function reactiveEffect() {\r\n        effectStack.push(effect)\r\n        fn();\r\n    }\r\n    return effect;\r\n}","import {effectStack} from \"./effect\"\r\nexport const mutableHandlers = {\r\n    get(target, key, receiver) {\r\n        return Reflect.get(target,key,receiver)\r\n    },\r\n    set(target, key, value, receiver) {\r\n        \r\n        let res = Reflect.set(target, key, value, receiver);\r\n        console.log(effectStack , '--------------------')\r\n        effectStack.forEach(effect=>effect());\r\n        return res;\r\n    }\r\n}","export const isObject = (val:unknown):val is Object => typeof val == 'object' && val !== null;","import {mutableHandlers} from './baseHandlers';\r\nimport {isObject} from '../shared/index'\r\nexport const reactive = (target:object) =>{\r\n    return createReactiveObject(target, mutableHandlers);\r\n}\r\n\r\nconst reactiveMap = new WeakMap();\r\nfunction createReactiveObject(target, baseHandler) {\r\n    if(!isObject(target)) return target;\r\n    let existProxy = reactiveMap.get(target)\r\n    if(existProxy) {\r\n        return existProxy\r\n    }\r\n\r\n    let proxy = new Proxy(target, baseHandler)\r\n    reactiveMap.set(target, proxy);\r\n    return proxy\r\n}"],"names":[],"mappings":";;;;;;QAAa,MAAM,GAAG,UAAC,EAAE,EAAE,OAAO;QAC9B,IAAM,MAAM,GAAG,oBAAoB,CAAC,EAAE,CAAC,CAAC;QACxC,MAAM,EAAE,CAAA;IACZ,EAAC;IAEM,IAAM,WAAW,GAAG,EAAE,CAAC;IAC9B,SAAS,oBAAoB,CAAC,EAAE;QAC5B,IAAM,MAAM,GAAG,SAAS,cAAc;YAClC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;YACxB,EAAE,EAAE,CAAC;SACR,CAAA;QACD,OAAO,MAAM,CAAC;IAClB;;ICXO,IAAM,eAAe,GAAG;QAC3B,GAAG,YAAC,MAAM,EAAE,GAAG,EAAE,QAAQ;YACrB,OAAO,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC,GAAG,EAAC,QAAQ,CAAC,CAAA;SAC1C;QACD,GAAG,YAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ;YAE5B,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;YACpD,OAAO,CAAC,GAAG,CAAC,WAAW,EAAG,sBAAsB,CAAC,CAAA;YACjD,WAAW,CAAC,OAAO,CAAC,UAAA,MAAM,IAAE,OAAA,MAAM,EAAE,GAAA,CAAC,CAAC;YACtC,OAAO,GAAG,CAAC;SACd;KACJ;;ICZM,IAAM,QAAQ,GAAG,UAAC,GAAW,IAAmB,OAAA,OAAO,GAAG,IAAI,QAAQ,IAAI,GAAG,KAAK,IAAI,GAAA;;QCEhF,QAAQ,GAAG,UAAC,MAAa;QAClC,OAAO,oBAAoB,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IACzD,EAAC;IAED,IAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAC;IAClC,SAAS,oBAAoB,CAAC,MAAM,EAAE,WAAW;QAC7C,IAAG,CAAC,QAAQ,CAAC,MAAM,CAAC;YAAE,OAAO,MAAM,CAAC;QACpC,IAAI,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;QACxC,IAAG,UAAU,EAAE;YACX,OAAO,UAAU,CAAA;SACpB;QAED,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,WAAW,CAAC,CAAA;QAC1C,WAAW,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QAC/B,OAAO,KAAK,CAAA;IAChB;;;;;;;;;;;"}